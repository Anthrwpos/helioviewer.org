<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Tranistional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>HelioViewer Alpha</title>
		<link rel="shortcut icon" href="favicon.ico" />
	
		<!-- YUI Libraries and Stylesheets -->
		<link rel="stylesheet" type="text/css" href="lib/yui/build/reset-fonts/reset-fonts.css">
		<link rel="stylesheet" type="text/css" href="lib/yui/build/container/assets/skins/sam/container.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/button/assets/skins/sam/button.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/calendar/assets/skins/sam/calendar.css"> 
		
		<script type="text/javascript" src="lib/yui/build/utilities/utilities.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/button/button.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/container/container.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/calendar/calendar.js?_yuiversion=2.5.0"></script>
	
		<!-- Prototype and Scriptaculous -->
		<script src="lib/prototype/prototype.js" type="text/javascript"></script>
		<script src="lib/scriptaculous/scriptaculous.js?load=effects,slider,dragdrop" type="text/javascript"></script>
		
		<!-- HelioViewer-Specific -->
		<script src="lib/SunViewer/LoadingIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Debug.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DomNodeCache.js" type="text/javascript"></script>
		<script src="lib/SunViewer/AjaxRequestWrapper.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewerWidget.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunImage.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Filter.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Tile.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileContainer.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Surface.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Overlay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Marker.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LatLon.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/InfoBubble.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewPort.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerConfigurator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunCoordsDisplay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SizeIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SelectByDateMenu.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Calendar.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ZoomLevelSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewportSizeManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewer.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="styles/sunviewer.css">
		<link rel="stylesheet" type="text/css" href="styles/sizeIndicator.css">
		
		<script type="text/javascript">
		// <![CDATA[

		function main() {
			// NOTE: This should all be encapsulated in the SunViewer class!
			var sunViewer = new SunViewer();
			
			//Custom Events
			document.layerExchange =    	new YAHOO.util.CustomEvent("layerExchange");
			document.zoomLevelChange =  	new YAHOO.util.CustomEvent("zoomLevelChange");
			document.zoomOffsetChange = 	new YAHOO.util.CustomEvent("zoomOffsetChange");
			document.sunImageChange =   	new YAHOO.util.CustomEvent("sunImageChange");
			document.timePrevious =			new YAHOO.util.CustomEvent("timePrevious");
			document.timeNext = 			new YAHOO.util.CustomEvent("timeNext");
			document.viewportSizeChange =	new YAHOO.util.CustomEvent("viewportSizeChange");
			
			// Create viewport
			var viewport1 = new ViewPort('sunViewer1.viewport1', {maxZoomLevel: 12});
			
			// Create tile containers
			var tiles1 = new TileContainer(viewport1);
				
			var layerManager1 = new LayerManager(tiles1, 'layerManager1', {viewport: viewport1});
				
			// Create tile layer providers
			var bg1 = new TileLayerProvider(tiles1, {zoomOffset: 12}); // OFFSET CAN BE SET HERE... WHAT ABOUT VIEWPORT PROPERTY?

			var markers1 = new MarkerLayerProvider(tiles1);
				
			var sizeIndicator = new SizeIndicator('sunViewer1.viewport1.sizeIndicator', bg1);
			
			var sunCoordsDisplay = new SunCoordsDisplay('sunViewer1.viewport1.sunCoordsDisplay', bg1);
				
			markers1.observe(bg1, 'ImageChange');
			//markers1.observe(bg1, 'ZoomOffsetChange');
			document.zoomOffsetChange.subscribe(markers1.onZoomOffsetChange, markers1);
			//document.sunImageChange.subscribe(markers1.onImageChange, markers1);
			
			var calendar = new Calendar('cal', 'date', 'show');
				
			var zoomLevelSlider = new ZoomLevelSlider('sunViewer1.viewport1.sliderHandle','sunViewer1.viewport1.sliderTrack', 'sunViewer1.viewport1.sliderPlus', 'sunViewer1.viewport1.sliderMinus', 0, 12, 12);
			
			//Setup event-handling time-navigation buttons
			$('timeBackBtn').observe('click', function() {document.timePrevious.fire();});
			$('timeForwardBtn').observe('click', function() {document.timeNext.fire();});
			
			//set-up alternative viewport sizes
			var viewportSizeManager = new ViewportSizeManager([["viewport-size-small",640,640,"images/blackGlass/glass_border_light_640x640.png"],
															   ["viewport-size-med",1024,768,"images/blackGlass/glass_border_light_1024x768.png"],
															   ["viewport-size-large",1280,960,"images/blackGlass/glass_border_light_1280x960.png"]]);
		}

		document.observe('dom:loaded', main);
		// ]]>
		</script>
		
	</head>
	<body class="yui-skin-sam">
	
	<!-- OUTERMOST CONTENT BOX -->
	<div id="outsideBox">
		<div><span id="loading" style="display: none">Loading...</span></div>
		
		<!--  1. HEADER -->
		<div id="header">
			<h1>HelioViewer</h1>

				<!-- Align left -->
				<div style="float:left">
					<!--  Observation Date -->
					<span>Observation Date:</span>
					<input type="text" id="date" name="date" value="" />
					
					<!-- Calendar Widget -->
					<button type="button" id="show" title="Show Calendar"></button>
	                <div id="container">
				    	<div class="hd">Calendar</div>
				    	<div class="bd">
				        	<div id="cal"></div>
				    	</div>
				    </div>
				</div>
				
				<!-- Align right -->
	        	<div style="text-align:right; line-height:400%; margin-right:12px;">
	        		<!-- Viewport Size Selection -->
				    <a href="#" id="viewport-size-small" class="lightGray">640</a>
				    <a href="#" id="viewport-size-med" class="gray">1024</a>
				    <a href="#" id="viewport-size-large" class="gray">1280</a>
				</div>

		</div>
	
		<!-- 2. VIEWPORT AND UI LAYERS -->			
		<div id="viewport-outer">
			<div id="viewport-inner">
			
				<!--  VIEWPORT -->
				<div id="sunViewer1.viewport1" class="viewport" style="z-index: 0; left: 0px; top:0px; width: 100%; height: 100%">
					<div class="surface" id="surface1"></div>
					<div class="well" id="well1"></div>
				</div>
				
				<!--  UI LAYER  -->
				<div id="ui">		
					<div id="layerManager1" class="layerManager" style="height: 15px; width: 70px; overflow: hidden; z-index:4;"></div>
					<div id="sunViewer1.viewport1.sunCoordsDisplay" class="sunCoordsDisplay" style="position: absolute; right: 10px; top: 10px;"></div>
					<div class="sizeIndicator" id="sunViewer1.viewport1.sizeIndicator" style="left: 10px; top: 545px"></div>
					<div class="viewportControls">
						<span class="centerControl">Center</span>
					</div>
			
					<!--  Zoom-Level Slider -->
					<div id="sunViewer1.viewport1.sliderPlus" class="sliderPlus">+</div>			
					<div id="sunViewer1.viewport1.sliderTrack" class="sliderTrack">
			   			<div id="sunViewer1.viewport1.sliderHandle" class="sliderHandle"></div>
					</div>
					<div id="sunViewer1.viewport1.sliderMinus" class="sliderMinus">-</div>
				</div>
			</div>
		</div>
		
		<!-- 3. FOOTER -->
		<div id="footer">
			<div style="float:left">
				<!-- button type="button" id="timeBackBtn" value="Previous Image"></button -->
				<!-- button type="button" id="timeForwardBtn" value="Next Image"></button -->
			</div>
       		<div style="text-align:right"><a id="about" class="nav">About</a></div>
		</div>
			
	</div>
	</body>
</html>
