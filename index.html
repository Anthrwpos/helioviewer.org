<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Tranistional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>HelioViewer Alpha</title>
		<link rel="shortcut icon" href="favicon.ico" />
	
		<!-- YUI Libraries and Stylesheets -->
		<link rel="stylesheet" type="text/css" href="lib/yui/build/reset-fonts/reset-fonts.css">
		<link rel="stylesheet" type="text/css" href="lib/yui/build/container/assets/skins/sam/container.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/button/assets/skins/sam/button.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/calendar/assets/skins/sam/calendar.css"> 
		
		<script type="text/javascript" src="lib/yui/build/utilities/utilities.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/button/button.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/container/container.js?_yuiversion=2.5.0"></script>
		<script type="text/javascript" src="lib/yui/build/calendar/calendar.js?_yuiversion=2.5.0"></script>
	
		<!-- Prototype and Scriptaculous -->
		<script src="lib/prototype/prototype.js" type="text/javascript"></script>
		<script src="lib/scriptaculous/scriptaculous.js?load=effects,slider,dragdrop" type="text/javascript"></script>
		
		<!-- date.js -->
		<script src="lib/utility/date.js" type="text/javascript"></script>
				
		<!-- HelioViewer-Specific -->
		<script src="lib/SunViewer/LoadingIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Debug.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DomNodeCache.js" type="text/javascript"></script>
		<script src="lib/SunViewer/AjaxRequestWrapper.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewerWidget.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DataNavigator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunImage.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Filter.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Tile.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileContainer.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Surface.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Overlay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Marker.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LatLon.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/InfoBubble.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewPort.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerConfigurator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunCoordsDisplay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SizeIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SelectByDateMenu.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Calendar.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ZoomLevelSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewportSizeManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewer.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="styles/sunviewer.css">
		<link rel="stylesheet" type="text/css" href="styles/sizeIndicator.css">
		
		<script type="text/javascript">
		// <![CDATA[

		function main() {
			// NOTE: This should all be encapsulated in the SunViewer class!
			var sunViewer = new SunViewer();
			
			// Custom Events
			document.layerExchange =    		new YAHOO.util.CustomEvent("layerExchange");
			document.zoomLevelChange =  		new YAHOO.util.CustomEvent("zoomLevelChange");
			document.zoomOffsetChange = 		new YAHOO.util.CustomEvent("zoomOffsetChange");
			document.sunImageChange =   		new YAHOO.util.CustomEvent("sunImageChange");
			document.timePrevious =				new YAHOO.util.CustomEvent("timePrevious");
			document.timeNext = 				new YAHOO.util.CustomEvent("timeNext");
			document.viewportSizeChange =		new YAHOO.util.CustomEvent("viewportSizeChange");
			document.dayChange =				new YAHOO.util.CustomEvent("dayChange");
			document.layerAdded =				new YAHOO.util.CustomEvent("layerAdded");
			document.layerRemoved =				new YAHOO.util.CustomEvent("layerRemoved");
			document.observationDateChange =	new YAHOO.util.CustomEvent("observationDateChange");
			document.observationTimeChange =    new YAHOO.util.CustomEvent("observationTimeChange");
			document.instrumentChange =     	new YAHOO.util.CustomEvent("instrumentChange");
			document.timeIncrementChange =		new YAHOO.util.CustomEvent("timeIncrementChange");
			
			//Global Variables
			numberOfTileLayers = 0;
			numberOfMarkerLayers = 0;
			GLOBAL_zoomLevel = 12;
			GLOBAL_zoomOffset = 0;
			
			// Available data ranges
		    DATE_START_EIT = "2003-10-04 03:24:00";
            DATE_END_EIT =   "2003-10-31 23:48:00";
            DATE_START_LAS = "2003-10-01 00:00:00";
            DATE_END_LAS =   "2003-10-31 23:54:00";
			
			// Create viewport
			var viewport1 = new ViewPort('sunViewer1.viewport1', {maxZoomLevel: 20});
			
			// Create tile containers
			var tiles1 = new TileContainer(viewport1);
			
			// Create a DataNavigator to keep traverse and keep track of available data near a given time
			var dataNavigator = new DataNavigator(2003, 10, 5, 0, 0, 0, 86400);
			
			var layerManager1 = new LayerManager(tiles1, 'layerManager1');
			
			// Create tile layer providers
			var bg1 = new TileLayerProvider(tiles1);
			
			var sizeIndicator = new SizeIndicator('sunViewer1.viewport1.sizeIndicator', bg1); //Currently needs to hear a 'sunImageChange' to tell it to load initially...
			var markers1 = new MarkerLayerProvider(tiles1);
			
			// UI Components

		    var sunCoordsDisplay = new SunCoordsDisplay('sunViewer1.viewport1.sunCoordsDisplay', bg1);
			var calendar = new Calendar('cal', 'date', 'show');
			var zoomLevelSlider = new ZoomLevelSlider('sunViewer1.viewport1.sliderHandle','sunViewer1.viewport1.sliderTrack', 'sunViewer1.viewport1.sliderPlus', 'sunViewer1.viewport1.sliderMinus', 10, 20, GLOBAL_zoomLevel);
			
			// Event-handling	
			$('timeBackBtn').observe('click', function () {
				document.timePrevious.fire();
			});
			$('timeForwardBtn').observe('click', function () {
				document.timeNext.fire();
			});
			$('date').observe('change', function () {
				document.observationDateChange.fire(this.value);
			});
			$('time').observe('change', function () {
                document.observationTimeChange.fire(this.value);
            });
			//$('timeIncrement').observe('change', function () {
			//	document.timeIncrementChange.fire(this.value);
			//});
			
			//TEMPORARY: TESTING TIME NAVIGATION SLIDER
			// Allowed values (in seconds): 60, 300, 900, 3600, 21600, 43200, 86400, 604800, etc.. Question: What about months and years which vary? (could use "daysInMonth()" or assume 30 days)
			var tmpLastVal = null;
			new Control.Slider('timestepHandle', 'timestepTrack', {
			                         sliderValue: 7,
			                         values: [0,1,2,3,4,5,6,7,8],
			                         range: $R(0,8),
			                         onSlide: function (v) {
			                             if (v == tmpLastVal) {
			                                 return;
			                             }
			                             var newText = null;
			                             switch (v) {
			                                 case 0:
			                                    newText = "1&nbsp;Sec";
			                                    break;
			                                 case 1:
			                                    newText = "1&nbsp;Min";
			                                    break;
			                                 case 2:
			                                     newText = "5&nbsp;Mins";
			                                     break;
			                                 case 3:
			                                     newText = "15&nbsp;Mins";
			                                     break;
			                                 case 4:
			                                     newText = "1&nbsp;Hour";
			                                     break;
			                                 case 5:
			                                     newText = "6&nbsp;Hours";
			                                     break;
			                                 case 6:
			                                     newText = "12&nbsp;Hours";
			                                     break;
			                                 case 7:
			                                     newText = "1&nbsp;Day";
			                                     break;
			                                 case 8:
			                                     newText = "1&nbsp;Week";  
			                                     break;
			                                 }
			                                 tmpLastVal = v;
                                             $('timestepValueDisplay').update(newText);
			                             },
			                         onChange: function (v) {
			                             var newVal = null;
                                         switch (v) {
                                             case 0:
                                                newVal = 1;
                                                break;
                                             case 1:
                                                newVal = 60;
                                                break;
                                             case 2:
                                                 newVal = 300;
                                                 break;
                                             case 3:
                                                 newVal = 900;
                                                 break;
                                             case 4:
                                                 newVal = 3600;
                                                 break;
                                             case 5:
                                                 newVal = 21600;
                                                 break;
                                             case 6:
                                                 newVal = 43200;
                                                 break;
                                             case 7:
                                                 newVal = 86400;
                                                 break;
                                             case 8:
                                                 newVal = 604800;  
                                                 break;
                                             }
                                             document.timeIncrementChange.fire(newVal);
			                             }
			                   });
	
			// Set-up alternative viewport sizes
			var viewportSizeManager = new ViewportSizeManager([["viewport-size-small", 640,640, "images/blackGlass/glass_border_light_640x640.png"],
															   ["viewport-size-med", 1024,768, "images/blackGlass/glass_border_light_1024x768.png"],
															   ["viewport-size-large", 1280,960, "images/blackGlass/glass_border_light_1280x960.png"]]);
				   
		}

		document.observe('dom:loaded', main);
		// ]]>
		</script>
		<style type="text/css">
		  #timestepTrack {
		      margin-top:7px;
		      width: 200px;
		      height: 5px;
		      background-color: #E5E5E5;
		      border:1px solid #858585;
		  }
		  #timestepHandle {
		      cursor: pointer;
		      height:17px;
		      color: white;
		      -moz-border-radius:3px;
		      width: 8px;
		      top:-5px;
		      /**background-color: #858585;*/
		      background-color:#111;
		      opacity:0.75;
		      border:2px solid black;
		  }
		  #timestepValueDisplay {
		      color:#111;
		      top:24px;
		      left:-7px;
		      position:relative;
		      padding:2px 0 0 1px;
		  }
		</style>
		
	</head>
	<body class="yui-skin-sam">
	
	<!-- OUTERMOST CONTENT BOX -->
	<div id="outsideBox">
	
	    <!-- 1. MESSAGE CONSOLE AND LOADING INDICATOR -->
        <div id="pre-header" style="height:18px;">
           <div style="width:33%; text-align:left; float:left; font-size:120%;"><a href="http://sirius.nascom.nasa.gov/~jack/patrick/sunviewer/index.html" class="gray">Go to TRACE full disk mosaics...</a></div>
           <div style="width:33%; text-align:center; float:left;">
               <span id="message-console" style="width:100%; display:none;">&nbsp;</span>&nbsp;
           </div>
           <div style="width:33%; text-align:right; float:left">&nbsp;<span id="loading" style="display: none">Loading...</span></div>
        </div>
		
		<!--  2. HEADER -->
		<div id="header">
			<h1>HelioViewer</h1>

				<!-- Align left -->
				<div style="float:left">
					<!--  Observation Date -->
					<span>Observation Date:</span>
					<input type="text" id="date" name="date" value="" />
					
					<!-- Calendar Widget -->
					<button type="button" id="show" title="Show Calendar"></button>
	                <div id="container">
				    	<div class="hd">Calendar</div>
				    	<div class="bd">
				        	<div id="cal"></div>
				    	</div>
				    </div>
				    
				    <!-- Observation Time -->
				   	<span style="margin-left:15px;">Observation Time:</span>
					<input type="text" id="time" name="time" value="00:00:00" style="width:80px"/>
				</div>
				
				<!-- Align right -->
	        	<div style="text-align:right; line-height:400%; margin-right:12px;">
	        		<!-- Viewport Size Selection -->
				    <a href="#" id="viewport-size-small" class="lightGray">640</a>
				    <a href="#" id="viewport-size-med" class="gray">1024</a>
				    <a href="#" id="viewport-size-large" class="gray">1280</a>
				</div>

		</div>
	
		<!-- 3. VIEWPORT AND UI LAYERS -->			
		<div id="viewport-outer">
			<div id="viewport-inner">
			<div id="layerManager1" class="layerManager" style="height: 15px; width: 70px; overflow: hidden; z-index:10001;"></div>
				<!--  VIEWPORT -->
				<div id="sunViewer1.viewport1" class="viewport" style="z-index: 0; left: 0px; top:0px; width: 100%; height: 100%">
					<div class="surface" id="surface1"></div>
					<div class="well" id="well1"></div>
					
					<!-- UI COMPONENTS -->
					
					<div id="sunViewer1.viewport1.sunCoordsDisplay" class="sunCoordsDisplay" style="position: absolute; right: 10px; top: 10px;"></div>
					<div class="sizeIndicator" id="sunViewer1.viewport1.sizeIndicator" style="left: 10px; top: 545px"></div>
					<div class="viewportControls">
						<span class="centerControl">Center</span>
					</div>
			
					<!--  Zoom-Level Slider -->
					<div id="sunViewer1.viewport1.sliderPlus" class="sliderPlus">+</div>			
					<div id="sunViewer1.viewport1.sliderTrack" class="sliderTrack">
			   			<div id="sunViewer1.viewport1.sliderHandle" class="sliderHandle"></div>
					</div>
					<div id="sunViewer1.viewport1.sliderMinus" class="sliderMinus">-</div>
					
				</div>
				
				<!--  UI LAYER (Moved temporarily to VIEWPORT layer)  -->
				<!-- <div id="ui">		

				</div>-->
			</div>
		</div>
		
		<!-- 4. FOOTER -->
		<div id="footer">
			<div style="float:left;">
				<button type="button" id="timeBackBtn" value="Previous Image"></button>
				<button type="button" id="timeForwardBtn" value="Next Image"></button>
			</div>
				
			<!-- Increment -->
			<div style="float:left;">
			    <span style="font-size:120%; clear:right; margin-bottom:10px;">timestep:</span>
			    <div id="timestepTrack">
                    <div id="timestepHandle">=<span id="timestepValueDisplay">1&nbsp;Day</span></div>
                </div>
			    <!-- <input type="text" value="86400" id="timeIncrement" style="width:60px"></input>-->
			</div>

       		<div style="text-align:right; font-size:120%;">
       		    <a id="about" class="gray" href="#" style="margin-right:20px;">About</a>
       		    <a href="http://www.helioviewer.org/wiki" class="gray" style="margin-right:20px">Wiki</a>
       			<a href="mailto:admin@helioviewer.org" alt="Contact Helioviewer.org Web Administrator" class="gray" style="margin-right:20px;">Contact</a>
       			<a href="https://bugs.launchpad.net/helioviewer/" class="gray">Report Bug</a>
       		</div>
		</div>
			
	</div>
	</body>
</html>
