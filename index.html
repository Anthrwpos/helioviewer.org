<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Tranistional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>HelioViewer Alpha</title>
		<link rel="shortcut icon" href="favicon.ico" />
	
		<!-- YUI Libraries and Stylesheets -->
		<link rel="stylesheet" type="text/css" href="lib/yui/build/reset-fonts/reset-fonts.css">
		<link rel="stylesheet" type="text/css" href="lib/yui/build/container/assets/skins/sam/container.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/button/assets/skins/sam/button.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/calendar/assets/skins/sam/calendar.css"> 
		
		<script type="text/javascript" src="lib/yui/build/utilities/utilities.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/button/button.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/container/container.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/calendar/calendar.js?_yuiversion=2.5.1"></script>
	
		<!-- Prototype and Scriptaculous -->
		<script src="lib/prototype/prototype.js" type="text/javascript"></script>
		<script src="lib/prototype/MouseWheel.js" type="text/javascript"></script>
		<script src="lib/scriptaculous/scriptaculous.js?load=effects,slider,dragdrop,builder" type="text/javascript"></script>

		<!-- jQuery -->
		<script src="lib/jquery/ui/jquery-1.2.4b.js" type="text/javascript"></script>
		<script src="lib/jquery/ui/ui.core.js" type="text/javascript"></script>
		<script src="lib/jquery/ui/ui.sortable.js" type="text/javascript"></script>
		<script src="lib/jquery/ui/ui.accordion.js" type="text/javascript"></script>
		<script src="lib/jquery/jquery-easing-1.3.js" type="text/javascript"></script>
		
		<!-- date.js -->
		<script src="lib/utility/date.js" type="text/javascript"></script>
				
		<!-- HelioViewer-Specific -->
		<script src="lib/SunViewer/LoadingIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Debug.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DomNodeCache.js" type="text/javascript"></script>
		<script src="lib/SunViewer/AjaxRequestWrapper.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DataNavigator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunImage.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Filter.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Tile.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileContainer.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Surface.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Overlay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManagerUI.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Marker.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LatLon.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/InfoBubble.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewPort.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunCoordsDisplay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SizeIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Calendar.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ZoomLevelSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TimeStepSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewer.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="styles/sunviewer.css">
		
		<script type="text/javascript">
		// <![CDATA[

		function main() {
			// NOTE: This should all be encapsulated in the SunViewer class!
			var sunViewer = new SunViewer();
			
			// Custom Events
			document.addLayer =              new YAHOO.util.CustomEvent("addLayer");
			document.dayChange =             new YAHOO.util.CustomEvent("dayChange");
			document.instrumentChange =      new YAHOO.util.CustomEvent("instrumentChange");
			document.layerAdded =            new YAHOO.util.CustomEvent("layerAdded");
			document.layerExchange =    	 new YAHOO.util.CustomEvent("layerExchange");
			document.layerPrepared =         new YAHOO.util.CustomEvent("layerPrepared");
			document.layerRemoved =          new YAHOO.util.CustomEvent("layerRemoved");
			document.monthChange =           new YAHOO.util.CustomEvent("monthChange");
			document.moveLayer =             new YAHOO.util.CustomEvent("moveLayer");
			document.newOverlay =            new YAHOO.util.CustomEvent("newOverlay");
			document.observationDateChange = new YAHOO.util.CustomEvent("observationDateChange");
			document.observationTimeChange = new YAHOO.util.CustomEvent("observationTimeChange");
			document.opacityChange =		 new YAHOO.util.CustomEvent("opacityChange");
			document.removeLayer =           new YAHOO.util.CustomEvent("removeLayer");
			document.showOverlayInfo =       new YAHOO.util.CustomEvent("showOverlayInfo");
			document.sunImageChange =   	 new YAHOO.util.CustomEvent("sunImageChange");
			document.tileLayerAdded =        new YAHOO.util.CustomEvent("tileLayerAdded");
			document.timeChange =			 new YAHOO.util.CustomEvent("timeChange");
			document.timeIncrementChange =	 new YAHOO.util.CustomEvent("timeIncrementChange");
			document.timeNext =              new YAHOO.util.CustomEvent("timeNext");
			document.timePrevious =          new YAHOO.util.CustomEvent("timePrevious");
			document.toggleLayerEnabled =    new YAHOO.util.CustomEvent("toggleLayerEnabled");
			document.updateTiles =           new YAHOO.util.CustomEvent("updateTiles");
			document.wavelengthChange =      new YAHOO.util.CustomEvent("wavelengthChange");
			document.zoomLevelChange =       new YAHOO.util.CustomEvent("zoomLevelChange");
			
			// Global Variables
			numberOfTileLayers = 0;
			numberOfMarkerLayers = 0;
			
			// Available data ranges
            DATE_START_EIT = "2003-01-01 00:00:00";
            DATE_END_EIT =   "2003-12-26 22:00:00";
            DATE_START_LAS = "2003-10-01 00:00:00";
            DATE_END_LAS =   "2003-10-31 23:54:00";
			
			// Create viewport
			var viewport = new ViewPort('sunViewer.viewport', {maxZoomLevel: 20});
			
			// Create tile containers
			var tiles = new TileContainer(viewport);
			
			// Create a DataNavigator to keep traverse and keep track of available data near a given time
			var dataNavigator = new DataNavigator(2003, 10, 5, 0, 0, 0, 86400);

            // Layer Manager & UI
            var layerManager = new LayerManager(tiles, 12);
            var lm = new LayerManagerUI('layerManagerUI');

            // Default layers			
            var markers = new MarkerLayerProvider(tiles, {id: 0, zoomLevel: 12});
			var sizeIndicator = new SizeIndicator('sunViewer.viewport.sizeIndicator', 256, {zoomLevel: 12}); //Currently needs to hear a 'sunImageChange' to tell it to load initially...
			var bg = new TileLayerProvider(tiles, {id: 1, zoomLevel: 12});
            
            // Render layer manager
            lm.render();
            
			// UI Components
		    var sunCoordsDisplay = new SunCoordsDisplay('sunViewer.viewport.sunCoordsDisplay', bg); //TODO: This and other components shouldn't depend on any one specific layer (e.g. bg)
			var calendar = new Calendar('cal', 'date', 'show');
			var zoomLevelSlider = new ZoomLevelSlider('sunViewer.viewport.sliderHandle','sunViewer.viewport.sliderTrack', 'sunViewer.viewport.sliderPlus', 'sunViewer.viewport.sliderMinus', 10, 20, 12);
			
			// Event-handling	
			$('timeBackBtn').observe('click', function ()    {document.timePrevious.fire();});
			$('timeForwardBtn').observe('click', function () {document.timeNext.fire();});
			$('date').observe('change', function ()          {document.observationDateChange.fire(this.value);});
			$('time').observe('change', function ()          {document.observationTimeChange.fire(this.value);});

	        // Set-up timestep slider
	        var timeStepSlider = new TimeStepSlider ("timestepHandle", "timestepTrack", 8);
	        
		}
        // Default to prototype for $() behavior
        jQuery.noConflict();

		document.observe('dom:loaded', main);
		// ]]>
		</script>
		
	</head>
	<body class="yui-skin-sam">
    	<div id="minHeight"></div>
    	
    	<!-- Header and Content -->
        <div id="outsideBox">
        
            <!-- Left Column -->
	        <div id="left-col">
	            <div id="left-col-header"><h1>HelioViewer</h1></div>	                                   
                <div id="layerManagerUI"></div>
	        </div>
	        
	        <!-- Right Column -->
	        <div id="right-col">
	            <div id="right-col-header">
	                <span id="loading" style="display: none">Loading...</span>
	            </div>
	           
	            <!-- Recent Updates -->
	            <div class='notes' style="height:340px">
                    <strong style="text-decoration: underline; font-size:150%; margin-bottom:10px; ">Recent Updates</strong>
                    
                    <!-- 05/14/2008 -->
                    <div style="height:80px">
 						<div style="float:left; width:35%; height:100%">
                            <b>05/14/2008</b>
                        </div>
                        <div style="width:100%; height:100%">
                            <ol>
                        		<li>Opacity controls added to layer manager.</li>
                        		<li>New icons for visibility/remove layer.</li>
                        	</ol>
                    	</div>
                    </div>
                    
                     <!--  05/13/2008 -->
                    <div style="height:110px">
                    	<div style="float:left; width: 35%; height: 100%">
                    		<b>05/13/2008</b>
                    	</div>
                    	<div style="width:100%; height:100%">
	                    	<ol>
	                        	<li>Wavelength displayed in layer manager for EIT</li>
	                        	<li>Wavelength switching</li>
	                        	<li>Layer manager now defaults to displaying details for top layer.</li>
	                        	<li>Detail form fields hidden until clicked..</li>                        
	                        </ol>
                        </div>                    	
                    </div>
                   
                    
                    <!--  05/12/2008 -->
                    <div style="height:130px">
                        <div style="float:left; width:35%; height:100%">
                            <b>05/12/2008</b>
                        </div>
                        <div style="width:100%; height:100%">
                            <ol>
                                <li>Instrument switching.</li><br />
                                <li>Adding and removing of layers.</li><br />
                                <li>Some bugs when working with multiple layers. Should be worked out shortly.</li>
                            </ol>
                        </div>
                    </div>
                    

                    
	            </div>
	           
                <br />
                
	            <!-- TODO -->
                <div class='notes' style="height:200px">
                    <strong style="text-decoration: underline; font-size:150%; margin-bottom:10px; ">TODO</strong>
                    
                    <!--  section one -->
                    <div style="height:55%">
                        <div style="float:left; width:35%; height:100%">
                            <b>Layout/CSS</b>
                        </div>
                        <div style="width:100%; height:100%">
                            <ol>
                                <li>Cross-browser solution for rounded corners.</li>
								<li>Ability to quickly hide side-panels to enable a near-full screen view with a simple layer manager</li>
                            </ol>
                        </div>
                    </div>
                    
                    <!-- section two -->
                    <div style="height:45%">
                        <div style="float:left; width:35%; height:100%">
                            <b>Layer Manager</b>
                        </div>
                        <div style="width:100%; height:100%">
                            <ol>
                                <li>Better icons</li>
								<li>Automatically adjust opacity on drag</li>
								<li>"Simple" mode</li>
                            </ol>
                        </div>
                   </div>
               </div>
	        </div>
	        
	        <!-- Middle Column -->
	        <div id="middle-col">
	            <div id="middle-col-header">
	               <div style="position: absolute; min-width:500px;">
		                <!-- Message Console -->
	                    <span id="message-console" style="width:100%; position: absolute; left:0pt; display:none; font-size:1em;">&nbsp;</span><div style="height:25px;">&nbsp;</div>
	                    
	                    <!--  Observation Date -->
	                    <span>Observation Date:</span>
	                    <input type="text" id="date" name="date" value=""></input>
	                
	                    <!-- Calendar Widget -->
	                    <button type="button" id="show" title="Show Calendar"></button>
	                    <div id="container">
	                        <div class="hd">Calendar</div>
	                        <div class="bd">
	                            <div id="cal"></div>
	                        </div>
	                    </div>
	                
	                    <!-- Observation Time -->
	                    <span style="margin-left:15px;">Observation Time:</span>
	                    <input type="text" id="time" name="time" value="00:00:00" style="width:80px"></input>
	                </div>
                </div>
                <!-- End middle-col-header -->
                
                <!-- Viewport -->
                <div id="viewport-outer" style="height:600px; background: transparent url(images/blackGlass/transparentBG25.png) repeat scroll 0%; border:1px solid black; -moz-border-radius:25px;">
                    <div id="viewport-inner" class="centered" style="top:3%; width:94%; height:94%">
	                    <div id="sunViewer.viewport" class="viewport" style="z-index: 0; left: 0px; top:0px; width: 100%; height: 100%">
		                    <div class="surface" id="surface"></div>
		                    <div class="well" id="well"></div>
		                    
		                    <!-- UI COMPONENTS -->
		                    <!-- Time Navigation Buttons -->
			                <div style="position: absolute; bottom:10px; left:20px; z-index:10000">
			                    <button type="button" id="timeBackBtn" value="Previous Image"></button>
			                    <button type="button" id="timeForwardBtn" value="Next Image"></button>
			                </div>
			                
			                <!-- Time Increment -->
			                <div style="position: absolute; bottom:15px; left:100px; z-index:1000">
			                    <!-- <span style="font-size:120%; clear:right; margin-bottom:10px;">timestep:</span>-->
			                    <div id="timestepTrack">
			                        <div id="timestepHandle"><span id="timestepValueDisplay">1&nbsp;Day</span></div>
			                    </div>
			                </div>
		                    
		                    <!-- Coordinates display -->
		                    <div id="sunViewer.viewport.sunCoordsDisplay" class="sunCoordsDisplay" style="position: absolute; right: 10px; top: 10px;"></div>
		                    <div class="sizeIndicator" id="sunViewer.viewport.sizeIndicator" style="right: 0px; bottom:10px;"></div>
		                    <div class="viewportControls">
		                        <span class="centerControl">Center</span>
		                    </div>
		            
		                    <!--  Zoom-Level Slider -->
		                    <div id="sunViewer.viewport.sliderPlus" class="sliderPlus">+</div>            
		                    <div id="sunViewer.viewport.sliderTrack" class="sliderTrack">
		                        <div id="sunViewer.viewport.sliderHandle" class="sliderHandle"></div>
		                    </div>
	                        <div id="sunViewer.viewport.sliderMinus" class="sliderMinus">-</div>
	                    </div>
	                </div>
                </div> 
	        </div>
	        <div id="clearfooter"></div>
	    </div>
	    <!-- end outer div -->
	    
	    <!-- Footer -->
	    <div id="footer">
	       <div style="height:70px; width:420px; float:left;"></div>
	       <div style="height:70px; width:660px; float:left; font-size:0.85em">
	                

	
	            <!-- Links -->
	            <div style="text-align:right; font-size:120%; height:60px;">
	                <a id="about" class="gray" href="#" style="margin-right:20px;">About</a>
	                <a href="http://www.helioviewer.org/wiki" class="gray" style="margin-right:20px">Wiki</a>
	                <a href="mailto:admin@helioviewer.org" alt="Contact Helioviewer.org Web Administrator" class="gray" style="margin-right:20px;">Contact</a>
	                <a href="https://bugs.launchpad.net/helioviewer/" class="gray">Report Bug</a>
	            </div>
            </div>
	    </div>
	</body>
</html>
