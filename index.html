<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Tranistional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>HelioViewer Alpha</title>
		<link rel="shortcut icon" href="favicon.ico" />
	
		<!-- YUI Libraries and Stylesheets -->
		<link rel="stylesheet" type="text/css" href="lib/yui/build/reset-fonts/reset-fonts.css">
		<link rel="stylesheet" type="text/css" href="lib/yui/build/container/assets/skins/sam/container.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/button/assets/skins/sam/button.css"> 
		<link rel="stylesheet" type="text/css" href="lib/yui/build/calendar/assets/skins/sam/calendar.css"> 
		
		<script type="text/javascript" src="lib/yui/build/utilities/utilities.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/button/button.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/container/container.js?_yuiversion=2.5.1"></script>
		<script type="text/javascript" src="lib/yui/build/calendar/calendar.js?_yuiversion=2.5.1"></script>
	
		<!-- Prototype and Scriptaculous -->
		<script src="lib/prototype/prototype.js" type="text/javascript"></script>
		<script src="lib/scriptaculous/scriptaculous.js?load=effects,slider,dragdrop,builder" type="text/javascript"></script>
		
		<!-- date.js -->
		<script src="lib/utility/date.js" type="text/javascript"></script>
				
		<!-- HelioViewer-Specific -->
		<script src="lib/SunViewer/LoadingIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Debug.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DomNodeCache.js" type="text/javascript"></script>
		<script src="lib/SunViewer/AjaxRequestWrapper.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewerWidget.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DataNavigator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunImage.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Filter.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Tile.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileContainer.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Surface.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Overlay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManagerUI.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Marker.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerCollection.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LatLon.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TileLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/OverlayLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/MarkerLayerProvider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/InfoBubble.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewPort.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerConfigurator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunCoordsDisplay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SizeIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SelectByDateMenu.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Calendar.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ZoomLevelSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/TimeStepSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewportSizeManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewer.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="styles/sunviewer.css">
		
		<script type="text/javascript">
		// <![CDATA[

		function main() {
			// NOTE: This should all be encapsulated in the SunViewer class!
			var sunViewer = new SunViewer();
			
			// Custom Events
			document.addLayer =              new YAHOO.util.CustomEvent("addLayer");
			document.dayChange =             new YAHOO.util.CustomEvent("dayChange");
			document.instrumentChange =      new YAHOO.util.CustomEvent("instrumentChange");
			document.layerAdded =            new YAHOO.util.CustomEvent("layerAdded");
            document.layerExchange =    	 new YAHOO.util.CustomEvent("layerExchange");
            document.layerPrepared =         new YAHOO.util.CustomEvent("layerPrepared");
            document.layerRemoved =          new YAHOO.util.CustomEvent("layerRemoved");
			document.monthChange =           new YAHOO.util.CustomEvent("monthChange");
			document.moveLayer =             new YAHOO.util.CustomEvent("moveLayer");
			document.newOverlay =            new YAHOO.util.CustomEvent("newOverlay");
			document.observationDateChange = new YAHOO.util.CustomEvent("observationDateChange");
            document.observationTimeChange = new YAHOO.util.CustomEvent("observationTimeChange");
            document.removeLayer =           new YAHOO.util.CustomEvent("removeLayer");
            document.showOverlayInfo =       new YAHOO.util.CustomEvent("showOverlayInfo");
			document.sunImageChange =   	 new YAHOO.util.CustomEvent("sunImageChange");
			document.tileLayerAdded =        new YAHOO.util.CustomEvent("tileLayerAdded");
			document.timeIncrementChange =	 new YAHOO.util.CustomEvent("timeIncrementChange");
			document.timeNext =              new YAHOO.util.CustomEvent("timeNext");
			document.timePrevious =          new YAHOO.util.CustomEvent("timePrevious");
			document.toggleLayerEnabled =    new YAHOO.util.CustomEvent("toggleLayerEnabled");
			document.updateTiles =           new YAHOO.util.CustomEvent("updateTiles");
			document.wavelengthChange =      new YAHOO.util.CustomEvent("wavelengthChange");
			document.zoomLevelChange =       new YAHOO.util.CustomEvent("zoomLevelChange");
			
			//Global Variables
			numberOfTileLayers = 0;
			numberOfMarkerLayers = 0;
			
			// Available data ranges
		    DATE_START_EIT = "2003-10-04 03:24:00";
            DATE_END_EIT =   "2003-10-31 23:48:00";
            DATE_START_LAS = "2003-10-01 00:00:00";
            DATE_END_LAS =   "2003-10-31 23:54:00";
			
			// Create viewport
			var viewport1 = new ViewPort('sunViewer1.viewport1', {maxZoomLevel: 20});
			
			// Create tile containers
			var tiles1 = new TileContainer(viewport1);
			
			// Create a DataNavigator to keep traverse and keep track of available data near a given time
			var dataNavigator = new DataNavigator(2003, 10, 5, 0, 0, 0, 86400);

		    // Layer Manager & UI
		    var layerManager = new LayerManager(tiles1, 12);
            var lm = new LayerManagerUI('layerManagerUI');

            // Default layers			
			var markers1 = new MarkerLayerProvider(tiles1, {id: 0, zoomLevel: 12});
			var bg1 = new TileLayerProvider(tiles1, {id: 1, zoomLevel: 12});
            
			// UI Components
            var sizeIndicator = new SizeIndicator('sunViewer1.viewport1.sizeIndicator', bg1, {zoomLevel: 12}); //Currently needs to hear a 'sunImageChange' to tell it to load initially...		    
		    var sunCoordsDisplay = new SunCoordsDisplay('sunViewer1.viewport1.sunCoordsDisplay', bg1); //TODO: This and other components shouldn't depend on any one specific layer (e.g. bg1)
			var calendar = new Calendar('cal', 'date', 'show');
			var zoomLevelSlider = new ZoomLevelSlider('sunViewer1.viewport1.sliderHandle','sunViewer1.viewport1.sliderTrack', 'sunViewer1.viewport1.sliderPlus', 'sunViewer1.viewport1.sliderMinus', 10, 20, 12);
			
			// Event-handling	
			$('timeBackBtn').observe('click', function ()    {document.timePrevious.fire();});
			$('timeForwardBtn').observe('click', function () {document.timeNext.fire();});
			$('date').observe('change', function ()          {document.observationDateChange.fire(this.value);});
			$('time').observe('change', function ()          {document.observationTimeChange.fire(this.value);});

	        // Set-up timestep slider
	        var timeStepSlider = new TimeStepSlider ("timestepHandle", "timestepTrack", 7);
		}

		document.observe('dom:loaded', main);
		// ]]>
		</script>
		
	</head>
	<body class="yui-skin-sam">
    	<div id="minHeight"></div>
    	
    	<!-- Header and Content -->
        <div id="outsideBox">
        
            <!-- Left Column -->
	        <div id="left-col">
	           <div id="left-col-header"><h1>HelioViewer</h1></div>	                                   
               <div id="layerManagerUI"></div>
	        </div>
	        
	        <!-- Right Column -->
	        <div id="right-col">
	           <div id="right-col-header">
	               <span id="loading" style="display: none">Loading...</span>
	           </div>
	        </div>
	        
	        <!-- Middle Column -->
	        <div id="middle-col">
	            <div id="middle-col-header">
	                <!-- Message Console -->
                    <span id="message-console" style="width:100%; display:none;">&nbsp;</span><div style="height:25px;">&nbsp;</div>
                    
                    <!--  Observation Date -->
                    <span>Observation Date:</span>
                    <input type="text" id="date" name="date" value=""></input>
                
                    <!-- Calendar Widget -->
                    <button type="button" id="show" title="Show Calendar"></button>
                    <div id="container">
                        <div class="hd">Calendar</div>
                        <div class="bd">
                            <div id="cal"></div>
                        </div>
                    </div>
                
                    <!-- Observation Time -->
                    <span style="margin-left:15px;">Observation Time:</span>
                    <input type="text" id="time" name="time" value="00:00:00" style="width:80px"></input>
                </div>
                
                <!-- Viewport -->
                <div id="viewport-outer" style="height:600px; background: transparent url(images/blackGlass/transparentBG25.png) repeat scroll 0%; border:1px solid black; -moz-border-radius:20px;">
                    <div id="viewport-inner" class="centered" style="top:14px; width:95%; height:570px;">
	                    <div id="sunViewer1.viewport1" class="viewport" style="z-index: 0; left: 0px; top:0px; width: 100%; height: 100%">
		                    <div class="surface" id="surface1"></div>
		                    <div class="well" id="well1"></div>
		                    
		                    <!-- UI COMPONENTS -->
		                    
		                    <div id="sunViewer1.viewport1.sunCoordsDisplay" class="sunCoordsDisplay" style="position: absolute; right: 10px; top: 10px;"></div>
		                    <div class="sizeIndicator" id="sunViewer1.viewport1.sizeIndicator" style="left: 10px; top: 93%"></div>
		                    <div class="viewportControls">
		                        <span class="centerControl">Center</span>
		                    </div>
		            
		                    <!--  Zoom-Level Slider -->
		                    <div id="sunViewer1.viewport1.sliderPlus" class="sliderPlus">+</div>            
		                    <div id="sunViewer1.viewport1.sliderTrack" class="sliderTrack">
		                        <div id="sunViewer1.viewport1.sliderHandle" class="sliderHandle"></div>
		                    </div>
	                        <div id="sunViewer1.viewport1.sliderMinus" class="sliderMinus">-</div>
	                    </div>
	                </div>
                </div> 
	        </div>
	        <div id="clearfooter"></div>
	    </div>
	    <!-- end outer div -->
	    
	    <!-- Footer -->
	    <div id="footer">
            <!-- Time Navigation Buttons -->
            <div style="float:left;">
                <button type="button" id="timeBackBtn" value="Previous Image"></button>
                <button type="button" id="timeForwardBtn" value="Next Image"></button>
            </div>
                
            <!-- Increment -->
            <div style="float:left;">
                <span style="font-size:120%; clear:right; margin-bottom:10px;">timestep:</span>
                <div id="timestepTrack">
                    <div id="timestepHandle">=<span id="timestepValueDisplay">1&nbsp;Day</span></div>
                </div>
            </div>

            <!-- Links -->
            <div style="text-align:right; font-size:120%; height:60px;">
                <a id="about" class="gray" href="#" style="margin-right:20px;">About</a>
                <a href="http://www.helioviewer.org/wiki" class="gray" style="margin-right:20px">Wiki</a>
                <a href="mailto:admin@helioviewer.org" alt="Contact Helioviewer.org Web Administrator" class="gray" style="margin-right:20px;">Contact</a>
                <a href="https://bugs.launchpad.net/helioviewer/" class="gray">Report Bug</a>
            </div>
	    </div>
	</body>
</html>
