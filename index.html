<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Tranistional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<script type="text/javascript">
			if (navigator.userAgent.indexOf('MSIE') > -1 && navigator.userAgent.indexOf('Mac') > -1) {
				location.href = "html/notsupported.html";
			}
		</script>
		<script src="lib/prototype/prototype.js" type="text/javascript"></script>
		<script src="lib/scriptaculous/scriptaculous.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LoadingIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Debug.js" type="text/javascript"></script>
		<script src="lib/SunViewer/DomNodeCache.js" type="text/javascript"></script>
		<script src="lib/SunViewer/AjaxRequestWrapper.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewerWidget.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunImage.js" type="text/javascript"></script>
		<script src="lib/SunViewer/tiles.js" type="text/javascript"></script>
		<script src="lib/SunViewer/Surface.js" type="text/javascript"></script>
		<script src="lib/SunViewer/overlays.js" type="text/javascript"></script>
		<script src="lib/SunViewer/markers.js" type="text/javascript"></script>
		<script src="lib/SunViewer/layers.js" type="text/javascript"></script>
		<script src="lib/SunViewer/InfoBubble.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ViewPort.js" type="text/javascript"></script>
		<script src="lib/SunViewer/LayerManager.js" type="text/javascript"></script>
		<script src="lib/SunViewer/ZoomLevelSlider.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunCoordsDisplay.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SizeIndicator.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SelectByDateMenu.js" type="text/javascript"></script>
		<script src="lib/SunViewer/SunViewer.js" type="text/javascript"></script>
		<script type="text/javascript">
		// <![CDATA[

		var sunViewer = null;
		var maximized = false;
		
		function initializeGraphic(e) {
			
			// opera triggers the onload twice
			if (sunViewer == null) {
				// NOTE: This should all be encapsulated in the SunViewer class!
				// Create viewport
				var viewport1 = new ViewPort('sunViewer1.viewport1', {maxZoomLevel: 9});
				
				// Create tile containers
				var tiles1 = new TileContainer(viewport1);
				var layerManager1 = new LayerManager(tiles1, 'layerManager1');
				
				// Create tile layer providers
				var bg1 = new TileLayerProvider(tiles1, {zoomOffset: 10}); // OFFSET CAN BE SET HERE... WHAT ABOUT VIEWPORT PROPERTY?
				//var debug1 = new TileDebugLayerProvider(tiles1);
				//var debug2 = new TileDebugLayerProvider(tiles2, { color: 'red' });
				var markers1 = new MarkerLayerProvider(tiles1);
				
				//var menu1 = new SelectByDateMenu('sunViewer1.menu1');
				//$('layerManager1').appendChild(menu1.createHtmlElement());
				//var menu2 = new SelectByDateMenu('sunViewer1.menu2');
				//$('layerManager1').appendChild(menu2.createHtmlElement());
				var zoomLevelSlider = new ZoomLevelSlider('sunViewer1.viewport1.zoomLevelSlider');
				var sizeIndicator = new SizeIndicator('sunViewer1.viewport1.sizeIndicator', bg1);
				var sunCoordsDisplay = new SunCoordsDisplay('sunViewer1.viewport1.sunCoordsDisplay', bg1);
				// Link menu to tile layer providers
				zoomLevelSlider.linkToViewports(viewport1);
				//bg1.observe(menu1, 'ImageChange');
				//bg2.observe(menu2, 'ImageChange')
				markers1.observe(bg1, 'ImageChange');
				markers1.observe(bg1, 'ZoomOffsetChange');

				
		}
	}
		
		Event.observe(window, 'load', initializeGraphic);
		// ]]>
		</script>
		<style type="text/css">
			@import url(styles/sunviewer.css);
			@import url(styles/sizeIndicator.css);
		</style>
	</head>
	<body>
	
		<div><span id="loading" style="padding: 3px; font-size: 10pt; color: #FFFFFF; background-color: #990000; position: absolute; top: 30px; right: 30px; display: none">Loading...</span></div>
		<div id="sunViewer1.header" class="header">
			<h1>SunViewer (alpha)</h1>
        	<p>
            	<a class="nav" onclick="SunViewer.showMessage('html/about.html')">About</a>&nbsp; 
        	</p>
		</div>
				<!--
				<table border="0" cellspacing="0" cellpadding="2">
				<tr>
					<td>
				<button type="button" onclick="viewerBean.centreImage()">Centre</button>
				<button type="button" onclick="viewerBean.reset()">Reset</button>
					</td><td width="150">
				<span id="coordinates" style="margin-left: 20px">
					Coordinates:
					<span id="NorS" style="width: 10px"></span>
					<span id="NorSdeg" style="width: 20px; text-align: right"></span>
					<span id="WorE" style="width: 10px"></span>
					<span id="WorEdeg" style="width: 20px; text-align: right"></span>
				</span>
					</td><td>
				<span id="rotation" style="margin-left: 20px">
					Rotation:
					<span id="RNorS" style="width: 10px">S</span>
					<span id="RNorSdeg" style="width: 20px; text-align: right">0</span>
					<span id="RWorE" style="width: 10px">W</span>
					<span id="RWorEdeg" style="width: 20px; text-align: right">0</span>
				</span>
					</td>
				</tr>
				</table>
				-->
		<div style="clear: left"></div>
		<div style="z-index: 1; position: relative; width: 600px; margin-right: 10px; margin-bottom: 10px; display: inline; float: left">

			<div id="layerManager1" class="layerManager" style="position: absolute; z-index: 2; height: 15px; width: 70px; overflow: hidden; margin-bottom: 10px" />
			</div>
			
			<div id="sunViewer1.viewport1" class="viewport" style="z-index: 0; left: 0px; width: 100%; height: 600px">
				<div class="surface" id="surface1">
					
				</div>
				<div class="well" id="well1">
					
				</div>
				<div id="sunViewer1.viewport1.zoomLevelSlider" class="viewportControls" style="position: absolute; left: 10px; top: 35px; text-align: center; padding: 2px 4px 2px 4px">
					<a href="JavaScript:void(0);" class="zoomIn" title="Zoom In">
						<img src="images/icons/zoomIn.gif" alt="" border="0" style="margin: 0px 0px 00px 0px" />
					</a>
					
					<div class="zoomLevelContainer">
						
					</div>
					
					<a href="JavaScript:void(0);" class="zoomOut" title="Zoom Out">
						<img src="images/icons/zoomOut.gif" alt="" border="0" style="margin: 0px 0px 0px 0px" />
					</a>
				</div>					
				<div id="sunViewer1.viewport1.sunCoordsDisplay" class="sunCoordsDisplay" style="position: absolute; right: 10px; top: 10px;">
				
				</div>
				<div class="sizeIndicator" id="sunViewer1.viewport1.sizeIndicator" style="left: 10px; top: 545px">
				</div>
				<div class="viewportControls" style="left: 0px; bottom: 0px; height: 20px; padding: 0px 4px 0px 4px; margin: 0px">
					<span class="centerControl">Center</span>
				</div>
		
			</div>
			<h2>Horizontal Slider with Preset Values</h2>
			
			<div id="track3" style="width:200px; background-color:#ccc; height:10px;">
				<div id="handle3" style="width:10px; height:15px; background-color:#f00; cursor:move;"></div>

			</div>

			<!-- Horizontal slider -->		
			<p id="debug3">&nbsp;</p>
			<script type="text/javascript" language="javascript">
			// <![CDATA[
			
				// horizontal slider control with preset values
				new Control.Slider('handle3', 'track3', {
					range: $R(-200, 200),
					values: [-200, -150, -100, -50, 0, 50, 100, 150, 200],
					sliderValue: 1, // won't work if set to 0 due to a bug(?) in script.aculo.us
					onSlide: function(v){ $('debug3').innerHTML = 'slide: ' + v },
					onChange: function(v){ $('debug3').innerHTML = 'changed: ' + v }
				});
			// ]]>
			</script>

			<!-- Debugger output console -->
			<!--<strong>Debug Output:</strong>
			<div>
			<textarea id="debugOutput" cols="100" rows="6"></textarea>
			</div>-->
	</body>
</html>
